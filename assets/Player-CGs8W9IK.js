import{r as u,w as A,o as M,f as G,c as f,e as y,a as e,g as P,b as Y,t as c,h as b,i as j,j as U,n as q,k as $,v as O,l as X,F as Z,d as H,m as K}from"./index-CswKs4Qx.js";import{u as ee,a as ae}from"./player-BB0YrVhQ.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";const te={class:"audio-player"},re=["src"],oe={key:0,class:"error-message"},se=["href"],le={__name:"AudioPlayer",props:{videoId:{type:String,default:null},audioUrl:{type:String,default:null},isPlaying:{type:Boolean,default:!1}},emits:["timeupdate","durationchange","ended","error","ready"],setup(S,{expose:r,emit:d}){const o=S,p=d,s=u(null),l=u(""),_=u(""),m=u(""),v=i=>({dQw4w9WgXcQ:"/audio/never-gonna-give-you-up.mp3",fJ9rUzIMcZQ:"/audio/bohemian-rhapsody.mp3",JGwWNGJdvx8:"/audio/shape-of-you.mp3",kJQP7kiw5Fk:"/audio/despacito.mp3",hT_nvWreIhg:"/audio/counting-stars.mp3"})[i]||"/audio/sample-audio.mp3",g=()=>{s.value&&p("timeupdate",s.value.currentTime)},T=()=>{s.value&&p("durationchange",s.value.duration)},L=()=>{p("ended")},w=()=>{_.value="Unable to play this audio. YouTube embedding may be restricted.",p("error",_.value)},E=()=>{_.value="",p("ready")},h=()=>{s.value&&s.value.play().catch(i=>{console.error("Error playing audio:",i),_.value="Unable to play audio automatically. Please click play."})},C=()=>{s.value&&s.value.pause()};return A(()=>o.isPlaying,i=>{i?h():C()}),A([()=>o.videoId,()=>o.audioUrl],([i,k])=>{i?(l.value=v(i),m.value=`https://www.youtube.com/watch?v=${i}`):k&&(l.value=k,m.value=""),o.isPlaying&&setTimeout(()=>{h()},100)},{immediate:!0}),M(()=>{o.videoId?(l.value=v(o.videoId),m.value=`https://www.youtube.com/watch?v=${o.videoId}`):o.audioUrl&&(l.value=o.audioUrl),o.isPlaying&&h()}),G(()=>{s.value&&s.value.pause()}),r({play:h,pause:C}),(i,k)=>(y(),f("div",te,[e("audio",{ref_key:"audioPlayer",ref:s,src:l.value,onTimeupdate:g,onLoadedmetadata:T,onEnded:L,onError:w,onCanplay:E},null,40,re),_.value?(y(),f("div",oe,[Y(c(_.value)+" ",1),m.value?(y(),f("a",{key:0,href:m.value,target:"_blank",rel:"noopener noreferrer"},"Open on YouTube",8,se)):P("",!0)])):P("",!0)]))}},ne=D(le,[["__scopeId","data-v-6eae49d2"]]),ie={class:"player"},ue={class:"player-container"},ce={class:"now-playing-card"},de={class:"album-art"},ve=["src","alt"],pe={class:"overlay-controls"},me={class:"track-info"},ye={class:"song-title"},_e={class:"artist"},fe={class:"album"},ge={class:"progress"},he={class:"progress-bar"},ke={class:"time"},Te={class:"current-time"},be={class:"total-time"},Pe={class:"track-selection-form"},we={class:"form-content"},Ce={class:"library-filters"},Ue={class:"filter-group"},Ae={class:"filter-group"},Le={class:"track-list"},Ee=["onClick"],xe={class:"track-image"},Se=["src","alt"],Ie={class:"track-details"},$e={class:"track-title"},Me={class:"track-artist"},De={class:"track-album"},Fe={class:"track-duration"},Be={key:0,class:"no-results"},Ne={key:1,class:"error-message"},Je={__name:"Player",setup(S){const r=ee(),d=u(!1),o=u(0),p=u(0),s=u(!1),l=u(""),_=u(null),m=u([]),v=u([]),g=u(""),T=u("title"),L=b(()=>o.value/p.value*100),w=b(()=>r.currentTrack?r.currentTrack.title:'Enemy (From the series "Arcane League")'),E=b(()=>r.currentTrack?r.currentTrack.artist:"Imagine Dragons, JID, & League of Legends"),h=b(()=>r.currentTrack?r.currentTrack.album:"Arcane League of Legends"),C=b(()=>r.currentTrack&&r.currentTrack.imageUrl?r.currentTrack.imageUrl:"https://via.placeholder.com/300"),i=t=>{const a=Math.floor(t/60),n=Math.floor(t%60);return`${a}:${n.toString().padStart(2,"0")}`},k=()=>{d.value=!d.value,r.togglePlay()},F=()=>{r.previousTrack()},I=()=>{r.nextTrack()},B=async t=>{s.value=!0,l.value="";try{await r.loadLocalTrack(t)?(d.value=!0,o.value=0):l.value=r.error||"Failed to load track"}catch(a){console.error("Error loading track:",a),l.value="An error occurred while loading the track"}finally{s.value=!1}},N=async()=>{s.value=!0,l.value="";try{m.value=ae.getAllTracks(),v.value=[...m.value],x(),!r.currentTrack&&v.value.length>0&&(await r.loadLocalTrack(v.value[0].id),d.value=!0)}catch(t){console.error("Error loading tracks:",t),l.value="An error occurred while loading tracks"}finally{s.value=!1}},J=()=>{if(!g.value.trim())v.value=[...m.value];else{const t=g.value.toLowerCase();v.value=m.value.filter(a=>a.title.toLowerCase().includes(t)||a.artist.toLowerCase().includes(t)||a.album.toLowerCase().includes(t))}x()},x=()=>{v.value.sort((t,a)=>{switch(T.value){case"title":return t.title.localeCompare(a.title);case"artist":return t.artist.localeCompare(a.artist);case"album":return t.album.localeCompare(a.album);case"duration":return t.duration-a.duration;default:return 0}})},Q=t=>{o.value=t},R=t=>{p.value=t},z=()=>{d.value=!1,r.isPlaying=!1,o.value=0,r.hasNext&&I()},V=t=>{l.value=t,console.error("Audio player error:",t)},W=()=>{l.value=""};return A(()=>r.currentTrack,t=>{t&&(p.value=t.duration||0,o.value=0,d.value=r.isPlaying)}),A(()=>r.isPlaying,t=>{d.value=t}),M(async()=>{await N()}),(t,a)=>(y(),f("div",ie,[e("div",ue,[U(r).currentTrack?(y(),j(ne,{key:0,audioUrl:U(r).currentTrack.audioUrl,isPlaying:d.value,onTimeupdate:Q,onDurationchange:R,onEnded:z,onError:V,onReady:W,ref_key:"audioPlayerRef",ref:_},null,8,["audioUrl","isPlaying"])):P("",!0),e("div",ce,[e("div",de,[e("img",{src:C.value,alt:w.value+" album art"},null,8,ve),e("div",pe,[e("button",{class:"control-btn previous",onClick:F},a[2]||(a[2]=[e("span",null,"⏮",-1)])),e("button",{class:"control-btn play",onClick:k},[e("span",null,c(d.value?"⏸":"▶"),1)]),e("button",{class:"control-btn next",onClick:I},a[3]||(a[3]=[e("span",null,"⏭",-1)]))])]),e("div",me,[e("div",ye,c(w.value),1),e("div",_e,c(E.value),1),e("div",fe,c(h.value),1),e("div",ge,[e("div",he,[e("div",{class:"progress-current",style:q({width:L.value+"%"})},null,4)]),e("div",ke,[e("span",Te,c(i(o.value)),1),e("span",be,c(i(p.value)),1)])])])]),e("div",Pe,[a[8]||(a[8]=e("h3",null,"Music Library",-1)),e("div",we,[e("div",Ce,[e("div",Ue,[a[4]||(a[4]=e("label",{for:"filter-input"},"Search:",-1)),$(e("input",{type:"text",id:"filter-input","onUpdate:modelValue":a[0]||(a[0]=n=>g.value=n),placeholder:"Search by title or artist",onInput:J},null,544),[[O,g.value]])]),e("div",Ae,[a[6]||(a[6]=e("label",{for:"sort-select"},"Sort by:",-1)),$(e("select",{id:"sort-select","onUpdate:modelValue":a[1]||(a[1]=n=>T.value=n),onChange:x},a[5]||(a[5]=[e("option",{value:"title"},"Title",-1),e("option",{value:"artist"},"Artist",-1),e("option",{value:"album"},"Album",-1),e("option",{value:"duration"},"Duration",-1)]),544),[[X,T.value]])])]),e("div",Le,[(y(!0),f(Z,null,H(v.value,n=>(y(),f("div",{key:n.id,class:K(["track-item",{active:U(r).currentTrack&&U(r).currentTrack.id===n.id}]),onClick:Qe=>B(n.id)},[e("div",xe,[e("img",{src:n.imageUrl,alt:n.title},null,8,Se),a[7]||(a[7]=e("div",{class:"play-overlay"},[e("span",{class:"play-icon"},"▶")],-1))]),e("div",Ie,[e("div",$e,c(n.title),1),e("div",Me,c(n.artist),1),e("div",De,c(n.album),1),e("div",Fe,c(i(n.duration)),1)])],10,Ee))),128))]),v.value.length===0?(y(),f("div",Be,' No tracks found matching "'+c(g.value)+'" ',1)):P("",!0),l.value?(y(),f("div",Ne,c(l.value),1)):P("",!0)])])])]))}},We=D(Je,[["__scopeId","data-v-f431e078"]]);export{We as default};
