import{p}from"./index-CswKs4Qx.js";const n=[{id:"playlist1",name:"Top Hits",description:"The hottest tracks right now",imageUrl:"https://via.placeholder.com/300?text=Top+Hits",tracks:[{id:"track1",title:"Summer Vibes",artist:"DJ Sunshine",album:"Summer Collection",duration:215,imageUrl:"https://via.placeholder.com/300?text=Summer+Vibes"},{id:"track2",title:"Midnight Dreams",artist:"Luna",album:"Nocturnal",duration:187,imageUrl:"https://via.placeholder.com/300?text=Midnight+Dreams"},{id:"track3",title:"Mountain High",artist:"The Climbers",album:"Elevation",duration:243,imageUrl:"https://via.placeholder.com/300?text=Mountain+High"}]},{id:"playlist2",name:"Chill Lounge",description:"Relaxing beats to unwind",imageUrl:"https://via.placeholder.com/300?text=Chill+Lounge",tracks:[{id:"track4",title:"Ocean Waves",artist:"Aqua",album:"Deep Blue",duration:302,imageUrl:"https://via.placeholder.com/300?text=Ocean+Waves"},{id:"track5",title:"Forest Whispers",artist:"Nature Sounds",album:"Wilderness",duration:264,imageUrl:"https://via.placeholder.com/300?text=Forest+Whispers"},{id:"track6",title:"Rainy Day",artist:"Cloud Nine",album:"Weather Patterns",duration:198,imageUrl:"https://via.placeholder.com/300?text=Rainy+Day"}]}],l={recentlyPlayed:[{id:"track7",title:"City Lights",artist:"Urban Beats",album:"Metropolis",duration:221,imageUrl:"https://via.placeholder.com/300?text=City+Lights"},{id:"track8",title:"Desert Wind",artist:"Nomad",album:"Journeys",duration:275,imageUrl:"https://via.placeholder.com/300?text=Desert+Wind"}],savedTracks:[{id:"track9",title:"Starlight",artist:"Cosmic",album:"Galaxy",duration:234,imageUrl:"https://via.placeholder.com/300?text=Starlight"},{id:"track10",title:"Mountain Stream",artist:"Nature Sounds",album:"Wilderness",duration:312,imageUrl:"https://via.placeholder.com/300?text=Mountain+Stream"}]},i=t=>new Promise(e=>setTimeout(e,t)),o={async login(){return await i(800),{success:!0,message:"Mock authentication successful"}},async logout(){return await i(500),{success:!0,message:"Mock logout successful"}},async getPlaylists(){return await i(1e3),n},async getPlaylistById(t){return await i(800),n.find(e=>e.id===t)||null},async getRecentlyPlayed(){return await i(700),l.recentlyPlayed},async getSavedTracks(){return await i(900),l.savedTracks},async playTrack(t){return await i(300),console.log(`Playing track: ${t}`),{success:!0}},async pausePlayback(){return await i(200),console.log("Pausing playback"),{success:!0}},async resumePlayback(){return await i(200),console.log("Resuming playback"),{success:!0}},async nextTrack(){return await i(300),console.log("Skipping to next track"),{success:!0}},async previousTrack(){return await i(300),console.log("Going back to previous track"),{success:!0}},async setVolume(t){return await i(100),console.log(`Setting volume to ${t}%`),{success:!0}},async search(t,e=["track","artist","album"]){await i(1200);const a={tracks:[],artists:[],albums:[]},u=[...n.flatMap(s=>s.tracks),...l.recentlyPlayed,...l.savedTracks],c=Array.from(new Map(u.map(s=>[s.id,s])).values());if(e.includes("track")&&(a.tracks=c.filter(s=>s.title.toLowerCase().includes(t.toLowerCase())||s.artist.toLowerCase().includes(t.toLowerCase()))),e.includes("artist")){const s=[...new Set(c.map(r=>r.artist))];a.artists=s.filter(r=>r.toLowerCase().includes(t.toLowerCase())).map(r=>({name:r,id:r.replace(/\s+/g,"").toLowerCase()}))}if(e.includes("album")){const s=[...new Set(c.map(r=>r.album))];a.albums=s.filter(r=>r.toLowerCase().includes(t.toLowerCase())).map(r=>({name:r,id:r.replace(/\s+/g,"").toLowerCase()}))}return a}},h=t=>{const e=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/,a=t.match(e);return a&&a[7].length===11?a[7]:null},g=async t=>{await new Promise(a=>setTimeout(a,800));const e={dQw4w9WgXcQ:{title:"Never Gonna Give You Up",artist:"Rick Astley",album:"Whenever You Need Somebody",thumbnailUrl:"https://img.youtube.com/vi/dQw4w9WgXcQ/maxresdefault.jpg",duration:213},fJ9rUzIMcZQ:{title:"Bohemian Rhapsody",artist:"Queen",album:"A Night at the Opera",thumbnailUrl:"https://img.youtube.com/vi/fJ9rUzIMcZQ/maxresdefault.jpg",duration:367},JGwWNGJdvx8:{title:"Shape of You",artist:"Ed Sheeran",album:"รท (Divide)",thumbnailUrl:"https://img.youtube.com/vi/JGwWNGJdvx8/maxresdefault.jpg",duration:234},kJQP7kiw5Fk:{title:"Despacito",artist:"Luis Fonsi ft. Daddy Yankee",album:"Vida",thumbnailUrl:"https://img.youtube.com/vi/kJQP7kiw5Fk/maxresdefault.jpg",duration:282},hT_nvWreIhg:{title:"Counting Stars",artist:"OneRepublic",album:"Native",thumbnailUrl:"https://img.youtube.com/vi/hT_nvWreIhg/maxresdefault.jpg",duration:257}};return e[t]?{...e[t],videoId:t}:{title:"YouTube Video",artist:"Unknown Artist",album:"YouTube",thumbnailUrl:`https://img.youtube.com/vi/${t}/maxresdefault.jpg`,duration:180,videoId:t}},y={async processYouTubeUrl(t){try{const e=h(t);if(!e)throw new Error("Invalid YouTube URL");return{success:!0,data:await g(e)}}catch(e){return console.error("Error processing YouTube URL:",e),{success:!1,error:e.message}}},getEmbedUrl(t){return`https://www.youtube.com/embed/${t}?autoplay=1&controls=1&enablejsapi=1&origin=${encodeURIComponent(window.location.origin)}&mute=0&playsinline=1&fs=1`},isValidYouTubeUrl(t){return h(t)!==null}},d=[{id:"track1",title:"Acoustic Guitar",artist:"SoundHelix",album:"Sample Tracks",duration:238,imageUrl:"https://images.unsplash.com/photo-1511379938547-c1f69419868d?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",audioUrl:"/audio/sample-audio.mp3"},{id:"track2",title:"Electronic Beat",artist:"SoundHelix",album:"Electronic Collection",duration:247,imageUrl:"https://images.unsplash.com/photo-1470225620780-dba8ba36b745?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",audioUrl:"/audio/electronic-beat.mp3"},{id:"track3",title:"Ambient Melody",artist:"SoundHelix",album:"Ambient Collection",duration:285,imageUrl:"https://images.unsplash.com/photo-1478737270239-2f02b77fc618?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",audioUrl:"/audio/ambient-melody.mp3"},{id:"track4",title:"Dance Track",artist:"SoundHelix",album:"Dance Collection",duration:226,imageUrl:"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",audioUrl:"/audio/dance-track.mp3"},{id:"track5",title:"Jazz Loop",artist:"SoundHelix",album:"Jazz Collection",duration:250,imageUrl:"https://images.unsplash.com/photo-1415201364774-f6f0bb35f28f?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",audioUrl:"/audio/jazz-loop.mp3"},{id:"track6",title:"Piano Melody",artist:"SoundHelix",album:"Piano Collection",duration:198,imageUrl:"https://images.unsplash.com/photo-1520523839897-bd0b52f945a0?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",audioUrl:"/audio/piano-melody.mp3"},{id:"track7",title:"Techno Beat",artist:"SoundHelix",album:"Techno Collection",duration:274,imageUrl:"https://images.unsplash.com/photo-1571330735066-03aaa9429d89?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",audioUrl:"/audio/techno-beat.mp3"},{id:"track8",title:"Rock Rhythm",artist:"SoundHelix",album:"Rock Collection",duration:230,imageUrl:"https://images.unsplash.com/photo-1498038432885-c6f3f1b912ee?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",audioUrl:"/audio/rock-rhythm.mp3"},{id:"track9",title:"Chill Vibes",artist:"SoundHelix",album:"Chill Collection",duration:265,imageUrl:"https://images.unsplash.com/photo-1506157786151-b8491531f063?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",audioUrl:"/audio/chill-vibes.mp3"},{id:"track10",title:"Acoustic Sunset",artist:"SoundHelix",album:"Acoustic Collection",duration:240,imageUrl:"https://images.unsplash.com/photo-1501612780327-45045538702b?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",audioUrl:"/audio/sample-audio.mp3"},{id:"track11",title:"Electronic Dreams",artist:"SoundHelix",album:"Electronic Collection Vol. 2",duration:310,imageUrl:"https://images.unsplash.com/photo-1614149162883-504ce4d13909?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",audioUrl:"/audio/electronic-beat.mp3"}],m={getAllTracks(){return d},getTrackById(t){return d.find(e=>e.id===t)||null},searchTracks(t){if(!t)return[];const e=t.toLowerCase();return d.filter(a=>a.title.toLowerCase().includes(e)||a.artist.toLowerCase().includes(e))}},f=p("player",{state:()=>({currentTrack:null,queue:[],isPlaying:!1,volume:80,repeat:!1,shuffle:!1,currentPlaylist:null,loading:!1,error:null,source:"local",youtubeVideoId:null}),getters:{currentTrackInfo:t=>t.currentTrack,isCurrentlyPlaying:t=>t.isPlaying,currentVolume:t=>t.volume,hasNext:t=>t.queue.length>0,hasPrevious:t=>t.playHistory.length>0},actions:{async loadPlaylist(t){this.loading=!0,this.error=null,this.source="spotify",this.youtubeVideoId=null;try{const e=await o.getPlaylistById(t);e&&(this.currentPlaylist=e,this.queue=[...e.tracks],this.queue.length>0&&!this.currentTrack&&(this.currentTrack=this.queue.shift()))}catch(e){this.error="Failed to load playlist: "+e.message,console.error(e)}finally{this.loading=!1}},loadLocalTrack(t){this.loading=!0,this.error=null;try{const e=m.getTrackById(t);if(!e)throw new Error("Track not found");return this.currentTrack=e,this.source="local",this.youtubeVideoId=null,this.isPlaying=!0,this.queue=[],this.currentPlaylist=null,!0}catch(e){return this.error="Failed to load track: "+e.message,console.error(e),!1}finally{this.loading=!1}},loadLocalTracks(){this.loading=!0,this.error=null;try{const t=m.getAllTracks();if(t.length===0)throw new Error("No tracks found");return this.currentPlaylist={id:"local-tracks",name:"Local Tracks",description:"All available local audio tracks",tracks:[...t]},this.queue=[...t.slice(1)],this.currentTrack=t[0],this.source="local",this.youtubeVideoId=null,!0}catch(t){return this.error="Failed to load tracks: "+t.message,console.error(t),!1}finally{this.loading=!1}},async loadYoutubeVideo(t){this.loading=!0,this.error=null;try{const e=await y.processYouTubeUrl(t);if(!e.success)throw new Error(e.error||"Failed to process YouTube URL");const a=e.data,u={id:"yt-"+a.videoId,title:a.title,artist:a.artist,album:a.album,duration:a.duration,imageUrl:a.thumbnailUrl};return this.currentTrack=u,this.source="youtube",this.youtubeVideoId=a.videoId,this.isPlaying=!0,this.queue=[],this.currentPlaylist=null,!0}catch(e){return this.error="Failed to load YouTube video: "+e.message,console.error(e),!1}finally{this.loading=!1}},async playTrack(t){this.loading=!0;try{await o.playTrack(t.id),this.currentTrack=t,this.isPlaying=!0}catch(e){this.error="Failed to play track: "+e.message,console.error(e)}finally{this.loading=!1}},async togglePlay(){if(this.currentTrack)try{this.isPlaying?await o.pausePlayback():await o.resumePlayback(),this.isPlaying=!this.isPlaying}catch(t){this.error="Playback control failed: "+t.message,console.error(t)}},async nextTrack(){if(this.queue.length!==0)try{const t=this.queue.shift();await this.playTrack(t),await o.nextTrack()}catch(t){this.error="Failed to play next track: "+t.message,console.error(t)}},async previousTrack(){try{await o.previousTrack(),this.isPlaying=!0}catch(t){this.error="Failed to play previous track: "+t.message,console.error(t)}},async setVolume(t){try{await o.setVolume(t),this.volume=t}catch(e){this.error="Failed to set volume: "+e.message,console.error(e)}},toggleRepeat(){this.repeat=!this.repeat},toggleShuffle(){if(this.shuffle=!this.shuffle,this.shuffle&&this.queue.length>1)for(let t=this.queue.length-1;t>0;t--){const e=Math.floor(Math.random()*(t+1));[this.queue[t],this.queue[e]]=[this.queue[e],this.queue[t]]}},async search(t){this.loading=!0,this.error=null;try{return await o.search(t)}catch(e){return this.error="Search failed: "+e.message,console.error(e),{tracks:[],artists:[],albums:[]}}finally{this.loading=!1}}},persist:{paths:["volume","repeat","shuffle"]}});export{m as a,o as s,f as u};
